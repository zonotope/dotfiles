;; -*-lisp-*-

(in-package :stumpwm)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; default apps                                                             ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(setq *terminal* "urxvtc")
(setq *browser* "firefox")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; setup the desktop                                                        ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(run-shell-command "xsetroot -cursor_name left_ptr")
(clear-window-placement-rules)
(restore-from-file "~/.stumpwm.d/basic.desk")
(define-frame-preference "main"
    (1 nil nil :class "Conky" :role nil))

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; appearance (Tomorrow Night Eighties)                                     ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(setf *colors*
      (list "#2d2d2d"   ; 0: black
            "#f2777a"   ; 1: red
            "#99cc99"   ; 2: green
            "#ffcc66"   ; 3: yellow
            "#6699cc"   ; 4: blue
            "#cc99cc"   ; 5: purple
            "#66cccc"   ; 6: aqua
            "#cccccc"   ; 7: white
            "#515151"   ; 8: light gray
            "#393939")) ; 9: dark gray

(update-color-map (current-screen))

(set-focus-color "#515151")            ; light gray
(set-unfocus-color "#393939")          ; gray
(set-float-focus-color "#515151")      ; light gray
(set-float-unfocus-color "#393939")    ; gray
(set-win-bg-color "#2d2d2d")           ; black
(set-fg-color "#cccccc")               ; white
(set-bg-color "#2d2d2d")               ; black
(set-border-color "#6699cc")           ; blue
(setf *hidden-window-color* "#ffcc66") ; yellow

(set-font "-*-dejavu sans mono-*-r-*-*-*-120-*-*-*-*-*-*")
(setf *window-border-style* :thin) ; :none, :thick, :thin, :tight
(setq *message-window-padding* 5)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; behavior                                                                 ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(setf *window-format* "[%m%s%n: %c--%15t]")
(setf *min-frame-height* 20)

;; window positioning
(setf *message-window-gravity* :center) ; :top-left :top-right :bottom-left
                                        ; :bottom-right :center

(setf *input-window-gravity* :center)   ; :top-left :top-right :bottom-left
                                        ; :bottom-right :center

;; mode line
(setf *mode-line-position* :top)
(setf *screen-mode-line-format* "%v")

;; set the mouse policy to focus follows mouse;
(setf *mouse-focus-policy* :sloppy) ; :click, :ignore, :sloppy

;; how long a message will appear in seconds
(setf *timeout-wait* 5)

;; what shows up in the middle of a newly focused frame
;; (setf *frame-indicator-text* " here! ")
;; TODO: Frame indicator is buggy in the latest version
(setf *suppress-frame-indicator* t)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; bindings                                                                 ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(set-prefix-key (kbd "C-t"))

;; b is for browser!
(define-key *root-map* (kbd "b") (concatenate 'string "exec " *browser*))

;; c is for console!
(define-key *root-map* (kbd "c") (concatenate 'string "exec " *terminal*))

;; dmenu is a better launcher than the built in
(define-key *root-map* (kbd "RET") "exec dmenu_run -fn \"Inconsolata-25\" -nb \"#393939\" -nf \"#999999\" -sf \"#6699cc\" -sb \"#393939\"")

;; = to bring up clipboard manager
(define-key *root-map* (kbd "=") "exec clipmenu -fn \"Inconsolata-25\" -nb \"#393939\" -nf \"#999999\" -sf \"#6699cc\" -sb \"#393939\"")

;; w is a better key for the window list
(define-key *root-map* (kbd "w") "windowlist")

;; F for fullscreen
(define-key *root-map* (kbd "F") "fullscreen")

;; C-- to toggle the mode line
(define-key *root-map* (kbd "C--") "mode-line")
